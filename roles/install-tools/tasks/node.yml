- name: "Installing fnm"
  ansible.builtin.shell: |
    curl -o- https://fnm.vercel.app/install | bash

- name: "Adding fnm to path & installing node"
  ansible.builtin.shell: |
    export FNM_PATH="/home/{{ ansible_user_id }}/.local/share/fnm"
    if [ -d "$FNM_PATH" ]; then
      export PATH="/home/{{ ansible_user_id }}/.local/share/fnm:$PATH"
      eval "`fnm env`"
    fi
    fnm install --latest
  become: true